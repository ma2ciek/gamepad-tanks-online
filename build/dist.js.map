{"version":3,"sources":["game.ts","collections/BackgroundManager.ts","collections/BulletManager.ts","collections/PlayerManager.ts","models/Player.ts","tank-models/E-100.ts","utils/Emitter.ts","utils/Vector.ts","utils/utils.ts","models/Bullet.ts","models/Tank.ts","collections/SoldierManager.ts","models/Soldier.ts","utils/Sprite.ts","utils/TimeController.ts","engine/ClassicCamera.ts","engine/PadController.ts","engine/Renderer.ts","engine/Scene.ts","engine/CollisionManager.ts","models/ClassicBackground.ts"],"names":[],"mappings":"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","file":"","sourcesContent":["import BackgroundManager from './collections/BackgroundManager';\nimport BulletManager from './collections/BulletManager';\nimport PlayerManager from './collections/PlayerManager';\nimport SoldierManager from './collections/SoldierManager';\nimport ClassicCamera from './engine/ClassicCamera';\nimport PadController from './engine/PadController';\nimport Renderer from './engine/Renderer';\nimport Scene from './engine/Scene';\nimport ClassicBackground from './models/ClassicBackground';\n\nconst canvas = document.getElementById('canvas') as HTMLCanvasElement;\nconst ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\nconst playerManager = new PlayerManager();\nplayerManager.bulletEmitter.subscribe(bullet => bulletManager.add(bullet));\n\nconst bulletManager = new BulletManager();\n\nconst soldierManager = new SoldierManager();\nsoldierManager.bulletEmitter.subscribe(bullet => bulletManager.add(bullet));\nsoldierManager.track(playerManager);\n\nwindow.setInterval(() => soldierManager.addSoldiers([{ x: 200, y: 200 }]), 10 * 1000);\n\nconst backgroundManager = new BackgroundManager();\nconst classicBackground = new ClassicBackground(['#3a3', '#6a2']);\n\nbackgroundManager.add(classicBackground);\n\nconst controller = new PadController(playerManager);\n\nconst scene = new Scene(\n    backgroundManager,\n    bulletManager,\n    playerManager,\n    soldierManager,\n);\n\nconst camera = new ClassicCamera();\n\ncamera.centerAt(playerManager);\n\nconst renderer = new Renderer({\n    scene,\n    controller,\n    ctx,\n    camera,\n});\n\nrenderer.render();\n","import IGameObject from '../models/IGameObject';\nimport IGameObjectIterable from './IGameObjectIterable';\n\nexport default class BackgroundManager implements IGameObjectIterable {\n    public objectsCollide = false;\n    private backgrounds: IGameObject[] = [];\n\n    public [Symbol.iterator]() {\n        return this.backgrounds[Symbol.iterator]();\n    }\n\n    public add(bg: IGameObject) {\n        this.backgrounds.push(bg);\n    }\n}\n","import Bullet from '../models/Bullet';\nimport IGameObjectIterable from './IGameObjectIterable';\n\nexport default class BulletManager implements IGameObjectIterable {\n    public objectsCollide = true;\n    private bullets: Bullet[] = [];\n\n    public [Symbol.iterator]() {\n        return this.bullets[Symbol.iterator]();\n    }\n\n    public add(bullet: Bullet) {\n        this.bullets.push(bullet);\n\n        bullet.destroyEmitter.subscribe(() => {\n            this.bullets = this.bullets.filter(b => b !== bullet);\n        });\n    }\n}\n","import Bullet from '../models/Bullet';\nimport Player from '../models/Player';\nimport Emitter from '../utils/Emitter';\nimport IGameObjectIterable from './IGameObjectIterable';\n\nexport default class PlayerManager implements IGameObjectIterable {\n    public bulletEmitter = new Emitter<Bullet>();\n    public playerEmitter = new Emitter<Player>();\n    public objectsCollide = true;\n    private players: { [id: string]: Player } = {};\n\n    public *[Symbol.iterator]() {\n        const ids = Object.keys(this.players);\n\n        for (const id of ids) {\n            yield this.players[id];\n        }\n    }\n\n    public updatePads() {\n        const pads = navigator.getGamepads();\n\n        Array.from(pads).forEach((pad, index) => {\n            if (!pad) {\n                return;\n            }\n\n            if (!this.players[pad.id]) {\n                this.addPlayer(pad);\n            }\n\n            this.players[pad.id].update(pad);\n        });\n    }\n\n    private addPlayer(pad: Gamepad) {\n        const player = this.createPlayer(pad);\n        this.players[pad.id] = player;\n\n        this.playerEmitter.emit(player);\n    }\n\n    private createPlayer(pad: Gamepad) {\n        const player = new Player(pad);\n\n        player.shotEmitter.subscribe(bullet => {\n            this.bulletEmitter.emit(bullet);\n        });\n\n        player.deathEmitter.subscribe(() => {\n            this.players[pad.id] = this.createPlayer(pad);\n        });\n\n        return player;\n    }\n}\n","import E_100 from '../tank-models/E-100';\nimport Emitter from '../utils/Emitter';\nimport Vector from '../utils/Vector';\nimport Bullet from './Bullet';\nimport IGameObject, { ICollidingGameObject } from './IGameObject';\nimport Tank from './Tank';\n\nconst colors = [\n    'green',\n    'red',\n    'blue',\n];\n\nexport default class Player implements IGameObject {\n    public shotEmitter = new Emitter<Bullet>();\n    public deathEmitter = new Emitter();\n    public type = 'player';\n\n    public get position() {\n        return this.tank.getPosition();\n    }\n\n    public kills = 0;\n    public deaths = 0;\n    public radius = 50;\n\n    public color: string;\n    private hp = 100;\n\n    private pad: Gamepad;\n\n    private tank: Tank;\n\n    private lastShotTimestamp = Date.now();\n\n    constructor(pad: Gamepad) {\n        this.pad = pad;\n        this.tank = new Tank(E_100);\n    }\n\n    public update(pad: Gamepad) {\n        this.pad = pad;\n\n        this.color = colors[this.pad.index];\n\n        const clickedButtons = this.pad.buttons.map(b => b.pressed);\n\n        clickedButtons.forEach((buttonClicked, i) => {\n            if (clickedButtons[i]) {\n                if (i === 5) {\n                    this.maybeShot();\n                }\n            }\n        });\n    }\n\n    public move() {\n        let moveVector = new Vector(this.pad.axes[0], this.pad.axes[1]);\n\n        if (this.pad.buttons[7].pressed) {\n            moveVector = Vector.times(moveVector, 2);\n        }\n\n        this.tank.move(moveVector);\n\n        if (this.pad.axes[2] !== 0 && this.pad.axes[3] !== 0) {\n            const gunVector = new Vector(this.pad.axes[2], this.pad.axes[3]);\n            const gunAngle = Vector.toAngle(gunVector);\n            const multiplier = Vector.getSize(gunVector);\n\n            this.tank.rotateGun(gunAngle, multiplier);\n        }\n    }\n\n    public draw(ctx: CanvasRenderingContext2D) {\n        this.tank.draw(ctx);\n    }\n\n    public handleHit(object: ICollidingGameObject) {\n        if (object.type !== 'bullet' || object.owner === this) {\n            return;\n        }\n\n        this.hp -= 10;\n\n        if (this.hp <= 0) {\n            this.deathEmitter.emit({});\n        }\n    }\n\n    private maybeShot() {\n        if (this.lastShotTimestamp + this.tank.getShotFrequency() > Date.now()) {\n            return;\n        }\n\n        const gunVector = Vector.fromAngle(this.tank.getGunAngle(), this.tank.getBulletSpeed());\n        const startPosition = Vector.add(this.tank.getPosition(), Vector.toSize(gunVector, this.tank.getGunSize()));\n\n        const bullet = new Bullet(startPosition, gunVector, this);\n\n        this.lastShotTimestamp = Date.now();\n        this.shotEmitter.emit(bullet);\n    }\n}\n","export default {\n    url: '../images/tanks/E-100_strip2.png',\n    tank: { x: 0, y: 0, width: 100, height: 170 },\n    gun: { x: 95, y: 10, width: 100, height: 200 },\n    tankCenter: { x: 50, y: 85 },\n    gunCenter: { x: 145, y: 115 },\n    gunSize: 70,\n    tankSpeed: 3,\n    tankRotationSpeed: Math.PI / 15,\n    gunRotationSpeed: Math.PI / 20,\n    bulletSpeed: 20,\n    shotFrequency: 200,\n};\n","type Callback<T> = (value: T) => void;\n\nexport default class Emitter<T> {\n    private watchers: Array<Callback<T>> = [];\n\n    public subscribe(fn: Callback<T>) {\n        this.watchers.push(fn);\n    }\n\n    public emit(value: T) {\n        this.watchers.forEach(fn => fn(value));\n    }\n}\n","import { normalizeAngle } from './utils';\n\nexport default class Vector {\n    public static copy(vector: Vector) {\n        return new Vector(vector.x, vector.y);\n    }\n\n    public static add(v1: Vector, v2: Vector) {\n        return new Vector(\n            v1.x + v2.x,\n            v1.y + v2.y,\n        );\n    }\n\n    public static times(v: Vector, value: number) {\n        return new Vector(\n            v.x * value,\n            v.y * value,\n        );\n    }\n\n    public static squaredDistance(v1: Vector, v2: Vector) {\n        return (v1.x - v2.x) ** 2 + (v1.y - v2.y) ** 2;\n    }\n\n    public static toSize(v: Vector, size: number) {\n        const times = size / Math.sqrt(v.x * v.x + v.y * v.y) || 0;\n        return Vector.times(v, times);\n    }\n\n    public static getSize(v: Vector) {\n        return Math.sqrt(v.x ** 2 + v.y ** 2);\n    }\n\n    public static fromAngle(angle: number, radius: number) {\n        return new Vector(\n            Math.cos(angle + Math.PI / 2) * radius,\n            Math.sin(angle + Math.PI / 2) * radius,\n        );\n    }\n\n    public static toAngle(v: Vector) {\n        const angle = Math.atan2(v.y, v.x) - Math.PI / 2;\n        return normalizeAngle(angle);\n    }\n\n    public static fromDiff(from: Vector, to: Vector) {\n        return new Vector(to.x - from.x, to.y - from.y);\n    }\n\n    constructor(\n        public x: number,\n        public y: number,\n    ) { }\n}\n\n(window as any).Vector = Vector;\n","export function drawArc(ctx: CanvasRenderingContext2D, x: number, y: number, r: number, color: string) {\n    ctx.beginPath();\n    ctx.fillStyle = color;\n    ctx.arc(x, y, r, 0, 2 * Math.PI);\n    ctx.fill();\n}\n\nexport function drawImage({\n    ctx, image, x, y,\n    width, height,\n    canvasOffsetX, canvasOffsetY,\n    angle = 0,\n    center,\n    zoom = 1,\n}: IImageDrawingParams) {\n    ctx.save();\n\n    if (!center) {\n        center = { x: 0, y: 0 };\n    }\n\n    ctx.translate(canvasOffsetX, canvasOffsetY);\n    ctx.rotate(angle);\n\n    ctx.drawImage(\n        image,\n        x, y, width, height,\n        -width / 2 * zoom, -height / 2 * zoom, width * zoom, height * zoom,\n    );\n\n    ctx.restore();\n}\n\ninterface IImageDrawingParams {\n    ctx: CanvasRenderingContext2D;\n    image: HTMLImageElement;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    canvasOffsetX: number;\n    canvasOffsetY: number;\n    angle?: number;\n    center?: {\n        x: number;\n        y: number;\n    };\n    zoom?: number;\n}\n\nexport function loadImage(url: string) {\n    return new Promise<HTMLImageElement>((res, rej) => {\n        const image = new Image();\n        image.onload = () => res(image);\n        image.onerror = rej;\n        image.onabort = rej;\n        image.src = url;\n    });\n}\n\nexport function createArray<T>(size: number, filler: T) {\n    const arr = new Array<T>(size);\n    for (let i = 0; i < size; i++) {\n        arr[i] = filler;\n    }\n    return arr;\n}\n\ninterface ICanvasDrawingOptions {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    ctx: CanvasRenderingContext2D;\n    strokeStyle?: string;\n    strokeWidth?: number;\n}\n\nexport function drawRect({ ctx, x, y, width, height, strokeStyle, strokeWidth }: ICanvasDrawingOptions) {\n    if (strokeStyle && strokeWidth) {\n        ctx.strokeStyle = strokeStyle;\n        ctx.lineWidth = strokeWidth;\n        ctx.strokeRect(x, y, width, height);\n    }\n}\n\nexport function normalizeAngle(angle: number) {\n    angle = angle % (2 * Math.PI);\n\n    if (angle > Math.PI) {\n        angle -= 2 * Math.PI;\n    }\n\n    if (angle < -Math.PI) {\n        angle += 2 * Math.PI;\n    }\n\n    return angle;\n}\n\nexport function joinIterators<T, P>(iterators: T, iterator: P): T & P;\nexport function joinIterators<T extends object>(...iterators: T[][]) {\n    return {\n        *[Symbol.iterator]() {\n            for (const iterator of iterators) {\n                for (const element of iterator) {\n                    yield element;\n                }\n            }\n        },\n    };\n}\n\nexport function mod(x: number, y: number) {\n    const result = x % y;\n\n    return (result >= 0) ?\n        result :\n        result + y;\n}\n","import IGameObject from '../models/IGameObject';\nimport Emitter from '../utils/Emitter';\nimport { drawArc } from '../utils/utils';\nimport Vector from '../utils/Vector';\n\nexport default class Bullet implements IGameObject {\n    public destroyEmitter = new Emitter();\n    public radius = 3;\n    public type = 'bullet';\n\n    public constructor(\n        public position: Vector,\n        public velocity: Vector,\n        public owner: IGameObject,\n    ) { }\n\n    public draw(ctx: CanvasRenderingContext2D) {\n        drawArc(ctx, this.position.x, this.position.y, this.radius, 'black');\n    }\n\n    public move() {\n        this.position.x += this.velocity.x;\n        this.position.y += this.velocity.y;\n    }\n\n    public handleHit() {\n        this.destroyEmitter.emit(this);\n    }\n}\n","import { drawImage, drawRect, loadImage, normalizeAngle } from '../utils/utils';\nimport Vector from '../utils/Vector';\n\nexport interface ITankModel {\n    url: string;\n    tank: IRect;\n    gun: IRect;\n    tankCenter: Vector;\n    gunCenter: Vector;\n    gunSize: number;\n    tankSpeed: number;\n    tankRotationSpeed: number;\n    gunRotationSpeed: number;\n    bulletSpeed: number;\n    shotFrequency: number;\n}\n\ninterface IRect {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nexport default class Tank {\n    private model: ITankModel;\n    private gunAngle = Math.atan2(0, 0);\n    private tankAngle = Math.atan2(0, 0);\n    private image: HTMLImageElement;\n    private position = new Vector(\n        Math.random() * 100,\n        Math.random() * 100,\n    );\n\n    constructor(model: ITankModel) {\n        this.model = model;\n\n        loadImage(model.url)\n            .then(image => this.image = image);\n    }\n\n    public draw(ctx: CanvasRenderingContext2D) {\n        if (!this.image) {\n            return;\n        }\n\n        this.drawTank(ctx);\n        this.drawGun(ctx);\n    }\n\n    public move(moveVector: Vector) {\n        const moveAngle = Vector.toAngle(moveVector);\n        const absMoveForce = Math.abs(Math.cos(moveAngle - this.tankAngle) * this.model.tankSpeed);\n\n        const newMoveVector = Vector.times(moveVector, absMoveForce);\n\n        if (moveVector.x !== 0 || moveVector.y !== 0) {\n            this.rotateTank(moveAngle, Vector.getSize(moveVector));\n        }\n\n        this.position = Vector.add(this.position, newMoveVector);\n    }\n\n    public rotateTank(angle: number, multiplier: number) {\n        const angleDiff = Math.abs(this.tankAngle - angle);\n        const movement = Math.min(this.model.tankRotationSpeed * multiplier, angleDiff);\n\n        if ((this.tankAngle - angle > 0 && this.tankAngle - angle < Math.PI) ||\n            this.tankAngle - angle < -Math.PI) {\n            this.tankAngle -= movement;\n        } else {\n            this.tankAngle += movement;\n        }\n\n        this.tankAngle = normalizeAngle(this.tankAngle);\n    }\n\n    public rotateGun(gunAngle: number, multiplier: number) {\n        const movement = Math.min(this.model.gunRotationSpeed * multiplier, Math.abs(this.gunAngle - gunAngle));\n\n        if ((this.gunAngle - gunAngle > 0 && this.gunAngle - gunAngle < Math.PI) ||\n            this.gunAngle - gunAngle < -Math.PI) {\n            this.gunAngle -= movement;\n        } else {\n            this.gunAngle += movement;\n        }\n\n        this.gunAngle = normalizeAngle(this.gunAngle);\n    }\n\n    public getGunAngle() {\n        return this.gunAngle;\n    }\n\n    public getBulletSpeed() {\n        return this.model.bulletSpeed;\n    }\n\n    public getPosition() {\n        return this.position;\n    }\n\n    public getGunSize() {\n        return this.model.gunSize;\n    }\n\n    public getShotFrequency() {\n        return this.model.shotFrequency;\n    }\n\n    private drawTank(ctx: CanvasRenderingContext2D) {\n        drawImage({\n            ctx,\n            image: this.image,\n            x: this.model.tank.x,\n            y: this.model.tank.y,\n            width: this.model.tank.width,\n            height: this.model.tank.height,\n            canvasOffsetX: this.position.x,\n            canvasOffsetY: this.position.y,\n            angle: this.tankAngle,\n            center: this.model.tankCenter,\n        });\n\n        if ((window as any).debugMode) {\n            drawRect({\n                ctx,\n                x: this.position.x,\n                y: this.position.y,\n                width: this.model.tank.width,\n                height: this.model.tank.height,\n                strokeStyle: 'red',\n                strokeWidth: 1,\n            });\n        }\n    }\n\n    private drawGun(ctx: CanvasRenderingContext2D) {\n        drawImage({\n            ctx,\n            image: this.image,\n            x: this.model.gun.x,\n            y: this.model.gun.y,\n            width: this.model.gun.width,\n            height: this.model.gun.height,\n            canvasOffsetX: this.position.x,\n            canvasOffsetY: this.position.y,\n            angle: this.gunAngle,\n            center: this.model.gunCenter,\n        });\n\n        if ((window as any).debugMode) {\n            drawRect({\n                ctx,\n                x: this.position.x,\n                y: this.position.y,\n                width: this.model.gun.width,\n                height: this.model.gun.height,\n                strokeStyle: 'blue',\n                strokeWidth: 1,\n            });\n        }\n    }\n}\n","import Bullet from '../models/Bullet';\nimport IGameObject from '../models/IGameObject';\nimport Soldier from '../models/Soldier';\nimport Emitter from '../utils/Emitter';\nimport Vector from '../utils/Vector';\nimport IGameObjectIterable from './IGameObjectIterable';\n\nexport default class SoldierManager implements IGameObjectIterable {\n    public bulletEmitter = new Emitter<Bullet>();\n    public objectsCollide = true;\n\n    private soldiers: Soldier[] = [];\n    private trackedObjects: Iterable<IGameObject>;\n\n    public [Symbol.iterator]() {\n        return this.soldiers[Symbol.iterator]();\n    }\n\n    public addSoldiers(startPositions: Vector[]) {\n        for (const position of startPositions) {\n            const soldier = new Soldier(position);\n\n            soldier.track(this.trackedObjects);\n\n            soldier.shotEmitter.subscribe(bullet => this.bulletEmitter.emit(bullet));\n            soldier.deathEmitter.subscribe(() => {\n                this.soldiers = this.soldiers.filter(s => s !== soldier);\n            });\n\n            this.soldiers.push(soldier);\n        }\n    }\n\n    public track(manager: Iterable<IGameObject>) {\n        this.trackedObjects = manager;\n    }\n}\n","import Emitter from '../utils/Emitter';\nimport Sprite from '../utils/Sprite';\nimport TimeController from '../utils/TimeController';\nimport Vector from '../utils/Vector';\nimport Bullet from './Bullet';\nimport IGameObject, { ICollidingGameObject } from './IGameObject';\n\ninterface ISprites {\n    move: Sprite;\n    idle: Sprite;\n    distanceAttack: Sprite;\n    meleeAtack: Sprite;\n    reload: Sprite;\n}\n\nconst URL = '../images/soldier/handgun/';\n\nexport default class Soldier implements IGameObject {\n    public shotEmitter = new Emitter<Bullet>();\n    public deathEmitter = new Emitter();\n\n    public position: Vector;\n    public radius = 30;\n    public type = 'soldier';\n\n    private hp = 100;\n    private ammo = 6;\n    private MAGAZINE_SIZE = 6;\n    private speed = 2;\n    private angle = 0;\n    private trackedObjects: Iterable<IGameObject>;\n    private turningLeft = Math.random() < 0.5;\n    private shotTimeController = new TimeController(1000);\n\n    private handgunSprites: ISprites = {\n        move: new Sprite({\n            url: URL + 'move.png', frameDuration: 50,\n            numberOfFrames: 20, zoom: 0.25,\n        }),\n        idle: new Sprite({\n            url: URL + 'idle.png', frameDuration: 50,\n            numberOfFrames: 20, zoom: 0.25,\n        }),\n        distanceAttack: new Sprite({\n            url: URL + 'distanceAttack.png', frameDuration: 50,\n            numberOfFrames: 3, zoom: 0.25, once: true,\n        }),\n        meleeAtack: new Sprite({\n            url: URL + 'meleeAttack.png', frameDuration: 50,\n            numberOfFrames: 10, zoom: 0.25,\n        }),\n        reload: new Sprite({\n            url: URL + 'reload.png', frameDuration: 50,\n            numberOfFrames: 15, zoom: 0.25, once: true,\n        }),\n    };\n\n    private currentSprite = this.handgunSprites.idle;\n\n    constructor(startPosition: Vector) {\n        this.position = startPosition;\n    }\n\n    public draw(ctx: CanvasRenderingContext2D) {\n        this.currentSprite.draw(ctx, this.position, this.angle);\n    }\n\n    public track(iterable: Iterable<IGameObject>) {\n        this.trackedObjects = iterable;\n    }\n\n    public handleHit(object: ICollidingGameObject) {\n        if (object.type !== 'bullet' || object.owner === this) {\n            return;\n        }\n\n        this.hp -= 10;\n\n        if (this.hp <= 0) {\n            this.deathEmitter.emit({});\n        }\n    }\n\n    public move() {\n        const opponent = this.findBestOpponent();\n\n        if (!opponent) {\n            return;\n        }\n\n        const diffVector = Vector.fromDiff(this.position, opponent.position);\n        const distance = Vector.getSize(diffVector);\n\n        if (distance > 1000) {\n            return;\n        }\n\n        // TODO: Improve this part.\n        if (this.currentSprite.hasToFinish()) {\n            return;\n        }\n\n        let moveVector: Vector;\n\n        if (distance > 400) {\n            moveVector = Vector.toSize(diffVector, Math.min(this.speed, distance));\n            this.setSprite(this.handgunSprites.move);\n        } else if (distance > 300) {\n            if (this.hasToReload()) {\n                this.reload();\n                return;\n            }\n\n            if (this.shotTimeController.can()) {\n                this.shot(opponent);\n                return;\n            }\n\n            if (Math.random() < 0.02) {\n                this.turningLeft = !this.turningLeft;\n            }\n\n            if (this.turningLeft) {\n                moveVector = Vector.toSize({ x: -diffVector.y, y: diffVector.x }, this.speed / 2);\n            } else {\n                moveVector = Vector.toSize({ x: diffVector.y, y: -diffVector.x }, this.speed / 2);\n            }\n\n            this.setSprite(this.handgunSprites.idle);\n\n        } else {\n            moveVector = Vector.toSize({ x: -diffVector.x, y: -diffVector.y }, this.speed);\n            this.setSprite(this.handgunSprites.move);\n        }\n\n        this.position = Vector.add(this.position, moveVector);\n        this.angle = Vector.toAngle(diffVector) + Math.PI / 2;\n    }\n\n    private findBestOpponent() {\n        const opponents = Array.from(this.trackedObjects);\n\n        let bestOpponent = opponents[0];\n\n        if (!bestOpponent) {\n            return;\n        }\n\n        let bestDistance = Vector.squaredDistance(opponents[0].position, this.position);\n\n        for (const opponent of opponents.slice(1)) {\n            const distance = Vector.squaredDistance(opponent.position, this.position);\n            if (distance < bestDistance) {\n                bestOpponent = opponent;\n                bestDistance = distance;\n            }\n        }\n\n        return bestOpponent;\n    }\n\n    private hasToReload() {\n        return this.ammo === 0;\n    }\n\n    private reload() {\n        this.ammo = this.MAGAZINE_SIZE;\n        this.setSprite(this.handgunSprites.reload);\n    }\n\n    private shot(object: IGameObject) {\n        this.setSprite(this.handgunSprites.distanceAttack);\n        this.ammo--;\n\n        const velocity = Vector.toSize(Vector.fromDiff(this.position, object.position), 5);\n\n        const translation = Vector.toSize(velocity, 40);\n        const spriteShotModifier = Vector.add(translation, { x: -translation.y * 0.4, y: translation.x * 0.4 });\n        const startPosition = Vector.add(this.position, spriteShotModifier);\n\n        const bullet = new Bullet(startPosition, velocity, this);\n\n        this.shotEmitter.emit(bullet);\n    }\n\n    private setSprite(sprite: Sprite) {\n        if (this.currentSprite === sprite) {\n            return;\n        }\n\n        this.currentSprite = sprite;\n        this.currentSprite.reset();\n    }\n}\n","import { drawImage, loadImage } from './utils';\nimport Vector from './Vector';\n\ninterface ISpriteOptions {\n    url: string;\n    frameDuration: number;\n    numberOfFrames: number;\n    zoom?: number;\n    once?: boolean;\n}\n\nexport default class Sprite {\n    private currentFrameIndex: number;\n    private frameWidth: number;\n    private frameHeight: number;\n    private image: HTMLImageElement;\n    private frameDuration: number;\n    private numberOfFrames: number;\n    private lastTimestamp = 0;\n    private zoom: number;\n    private once: boolean;\n\n    constructor(options: ISpriteOptions) {\n        this.currentFrameIndex = 0;\n        this.frameDuration = options.frameDuration;\n        this.numberOfFrames = options.numberOfFrames;\n        this.zoom = options.zoom || 1;\n        this.once = !!options.once;\n\n        loadImage(options.url).then(image => {\n            this.image = image;\n            this.frameWidth = image.naturalWidth / options.numberOfFrames;\n            this.frameHeight = image.height;\n        });\n    }\n\n    public reset() {\n        this.currentFrameIndex = 0;\n    }\n\n    public hasToFinish() {\n        return !this.isLastFrame() && this.once;\n    }\n\n    public isLastFrame() {\n        return this.currentFrameIndex === this.numberOfFrames - 1;\n    }\n\n    public draw(ctx: CanvasRenderingContext2D, position: Vector, angle: number) {\n        if (!this.image) {\n            return;\n        }\n\n        if (Date.now() >= this.lastTimestamp + this.frameDuration) {\n            this.nextFrame();\n            this.lastTimestamp = Date.now();\n        }\n\n        drawImage({\n            ctx,\n            angle,\n            width: this.frameWidth,\n            height: this.frameHeight,\n            canvasOffsetX: position.x,\n            canvasOffsetY: position.y,\n            image: this.image,\n            x: this.frameWidth * this.currentFrameIndex,\n            y: 0,\n            zoom: this.zoom,\n        });\n    }\n\n    private nextFrame() {\n        if (!this.isLastFrame() || !this.once) {\n            this.currentFrameIndex = (this.currentFrameIndex + 1) % this.numberOfFrames;\n        }\n    }\n\n}\n","export default class TimeController {\n    private lastTimestamp = 0;\n    private debounceTime = 0;\n\n    constructor(debounceTime: number) {\n        this.debounceTime = debounceTime;\n    }\n\n    public can() {\n        const availible = Date.now() > this.debounceTime + this.lastTimestamp;\n        if (availible) {\n            this.lastTimestamp = Date.now();\n        }\n\n        return availible;\n    }\n}\n","import IGameObjectIterable from '../collections/IGameObjectIterable';\nimport ICamera from './ICamera';\n\nexport default class ClassicCamera implements ICamera {\n    private collection: IGameObjectIterable;\n\n    public updateBefore(ctx: CanvasRenderingContext2D) {\n        const options = this.getOptions();\n\n        ctx.save();\n\n        ctx.translate(\n            -options.center.x + ctx.canvas.width / 2,\n            -options.center.y + ctx.canvas.height / 2,\n        );\n\n        ctx.scale(\n            ctx.canvas.width / (options.width + ctx.canvas.width),\n            ctx.canvas.height / (options.height + ctx.canvas.height),\n        );\n    }\n\n    public updateAfter(ctx: CanvasRenderingContext2D) {\n        ctx.restore();\n    }\n\n    public centerAt(collection: IGameObjectIterable) {\n        this.collection = collection;\n    }\n\n    public getOptions() {\n        let maxLeft = 0;\n        let maxRight = 0;\n        let maxTop = 0;\n        let maxBottom = 0;\n\n        for (const { position } of this.collection) {\n            maxLeft = Math.min(position.x, maxLeft);\n            maxRight = Math.max(position.x, maxRight);\n            maxTop = Math.min(position.y, maxTop);\n            maxBottom = Math.max(position.y, maxBottom);\n        }\n\n        return {\n            center: {\n                x: (maxLeft + maxRight) / 2,\n                y: (maxTop + maxBottom) / 2,\n            },\n            width: maxRight - maxLeft,\n            height: maxBottom - maxTop,\n        };\n    }\n}\n","export default class PadController {\n    // TODO.\n\n    constructor(private updater: { updatePads: () => void }) {\n    }\n\n    public update() {\n        this.updater.updatePads();\n    }\n}\n","import ICamera from './ICamera';\nimport IController from './IController';\nimport Scene from './Scene';\n\ninterface IRendererOptions {\n    scene: Scene;\n    controller: IController;\n    ctx: CanvasRenderingContext2D;\n    camera: ICamera;\n}\n\nexport default class Renderer {\n    private scene: Scene;\n    private controller: IController;\n    private ctx: CanvasRenderingContext2D;\n    private camera: ICamera;\n\n    constructor({ scene, controller, ctx, camera }: IRendererOptions) {\n        this.scene = scene;\n        this.controller = controller;\n        this.ctx = ctx;\n        this.camera = camera;\n\n        this.updateScreen();\n        window.onresize = () => this.updateScreen();\n    }\n\n    public render = () => {\n        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n\n        this.camera.updateBefore(this.ctx);\n\n        this.controller.update();\n        this.scene.update();\n        this.scene.render(this.ctx, this.camera.getOptions());\n\n        this.camera.updateAfter(this.ctx);\n\n        requestAnimationFrame(this.render);\n    }\n\n    private updateScreen() {\n        this.ctx.canvas.width = window.innerWidth;\n        this.ctx.canvas.height = window.innerHeight;\n    }\n}\n","import IGameObjectIterable, { ICollidingGameObjectIterable } from '../collections/IGameObjectIterable';\nimport CollisionManager from './CollisionManager';\nimport { ICameraOptions } from './ICamera';\n\nexport default class Scene {\n    private collisionManager = new CollisionManager();\n    private iterables: IGameObjectIterable[] = [];\n\n    constructor(...iterables: IGameObjectIterable[]) {\n        this.add(...iterables);\n    }\n\n    public add(...iterables: IGameObjectIterable[]) {\n        for (const iterable of iterables) {\n            this.iterables.push(iterable);\n\n            if (iterable.objectsCollide) {\n                this.collisionManager.add(iterable as ICollidingGameObjectIterable);\n            }\n        }\n    }\n\n    public render(ctx: CanvasRenderingContext2D, cameraOptions: ICameraOptions) {\n        for (const iterable of this.iterables) {\n            for (const element of iterable) {\n                element.move();\n                element.draw(ctx, cameraOptions);\n            }\n        }\n\n        ctx.restore();\n    }\n\n    public update() {\n        for (const iterable of this.iterables) {\n            for (const element of iterable) {\n                element.move();\n            }\n        }\n\n        this.collisionManager.checkCollisions();\n    }\n}\n","import { ICollidingGameObjectIterable } from '../collections/IGameObjectIterable';\nimport { ICollidingGameObject } from '../models/IGameObject';\nimport Vector from '../utils/Vector';\n\nexport default class CollisionManager {\n    private objectIterators: ICollidingGameObjectIterable[] = [];\n\n    public add(...objects: ICollidingGameObjectIterable[]) {\n        this.objectIterators.push(...objects);\n    }\n\n    public checkCollisions() {\n        for (let i = 0; i < this.objectIterators.length; i++) {\n            for (let j = 0; j < i; j++) {\n                for (const o1 of this.objectIterators[i]) {\n                    for (const o2 of this.objectIterators[j]) {\n                        const collision = this.checkCollision(o1, o2);\n\n                        if (collision) {\n                            o1.handleHit(o2);\n                            o2.handleHit(o1);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    private checkCollision(o1: ICollidingGameObject, o2: ICollidingGameObject) {\n        return (o1.radius + o2.radius) ** 2 > Vector.squaredDistance(o1.position, o2.position);\n    }\n}\n","import { mod } from '../utils/utils';\nimport IGameObject, { IDrawOptions } from './IGameObject';\n\nexport default class ClassicBackground implements IGameObject {\n    public position = { x: 0, y: 0 };\n    public type = 'background';\n\n    constructor(private colors: string[]) { }\n\n    public draw(ctx: CanvasRenderingContext2D, { center }: IDrawOptions) {\n        const tileSize = 100;\n\n        const startX = Math.floor((center.x - ctx.canvas.width / 2) / tileSize) * tileSize;\n        const startY = Math.floor((center.y - ctx.canvas.height / 2) / tileSize) * tileSize;\n\n        for (let x = startX; x < center.x + ctx.canvas.width / 2; x += tileSize) {\n            for (let y = startY; y < center.y + ctx.canvas.height / 2; y += tileSize) {\n                // TODO: this.colors.length\n                ctx.fillStyle = this.colors[mod(x + y, tileSize * 2) / tileSize];\n                ctx.fillRect(x, y, tileSize + 1, tileSize + 1);\n            }\n        }\n    }\n\n    public move() {\n        // Empty - TODO (?)\n    }\n}\n"]}