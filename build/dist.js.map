{"version":3,"sources":["index.ts","controllers/ControllerManager.ts","controllers/MouseAndKeyboardController.ts","controllers/Cursor.ts","controllers/PadController.ts","Game.ts","collections/BackgroundManager.ts","models/ClassicBackground.ts","utils/utils.ts","collections/BulletManager.ts","collections/UnitManager.ts","models/Soldier.ts","utils/TimeController.ts","models/Bullet.ts","models/Tank.ts","engine/Renderer.ts","engine/Scene.ts","engine/CollisionManager.ts","engine/WholeViewCamera.ts","players/HumanTankPlayer.ts","tank-models/E-100.ts"],"names":[],"mappings":"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","file":"","sourcesContent":["import ControllerManager from './controllers/ControllerManager';\nimport Game from './Game';\n// import AISoldierPlayer from './players/AISoldierPlayer';\nimport HumanTankPlayer from './players/HumanTankPlayer';\nimport E100 from './tank-models/E-100';\n\nconst controllerManager = new ControllerManager();\n\ncontrollerManager.newControllerEmitter.subscribe(( controller ) => {\n    if ( controllerManager.getControllers().length === 2 ) {\n        start();\n    }\n} );\n\nfunction start() {\n    const controllers = controllerManager.getControllers();\n\n    const game = new Game( {\n        audioTheme: '/audio/theme/FragileCeiling.ogg',\n        backgrounds: [ { colors: [ '#3a3', '#6a2' ] }],\n        units: [ {\n            type: 'tank',\n            position: { x: 200, y: 200 },\n            player: new HumanTankPlayer( controllers[ 0 ] ),\n            model: E100,\n        }, {\n            type: 'tank',\n            position: { x: 300, y: 300 },\n            player: new HumanTankPlayer( controllers[ 1 ] ),\n            model: E100,\n        }],\n        cursor: controllerManager.getCursor(),\n    } );\n\n    game.play();\n\n    ( window as any ).game = game;\n}\n","import { Emitter } from '@ma2ciek/events';\nimport IController from './IController';\nimport MouseAndKeyboardController from './MouseAndKeyboardController';\nimport PadController from './PadController';\n\nexport default class ControllerManager {\n    public newControllerEmitter = new Emitter<IController>();\n    private padControllers: { [ id: string ]: PadController } = {};\n    private mouseAndKeyboardController = new MouseAndKeyboardController();\n\n    constructor() {\n        setTimeout(() => {\n            this.update();\n            this.newControllerEmitter.emit( this.mouseAndKeyboardController );\n        } );\n    }\n\n    public getCursor() {\n        return this.mouseAndKeyboardController.getCursor();\n    }\n\n    public getControllers(): IController[] {\n        return [\n            this.mouseAndKeyboardController,\n            ...Object.keys( this.padControllers ).map( id => this.padControllers[ id ] ),\n        ].filter( c => !!c );\n    }\n\n    public update = () => {\n        this.updatePads();\n        requestAnimationFrame( this.update );\n    }\n\n    private updatePads() {\n        const pads = navigator.getGamepads();\n\n        Array.from( pads ).forEach(( pad, index ) => {\n            if ( !pad ) {\n                return;\n            }\n\n            if ( !this.padControllers[ pad.id ] ) {\n                this.addPad( pad );\n                this.padControllers[ pad.id ].update( pad );\n                this.newControllerEmitter.emit( this.padControllers[ pad.id ] );\n            } else {\n                this.padControllers[ pad.id ].update( pad );\n            }\n        } );\n    }\n\n    private addPad( pad: Gamepad ) {\n        this.padControllers[ pad.id ] = new PadController();\n    }\n}\n","import { Vector } from '@ma2ciek/math';\nimport Cursor from './Cursor';\nimport IController from './IController';\n\nconst defaultKeyBinding = {\n    SPEED_UP: 16,\n};\n\nconst defaultMouseButtonBinding = {\n    SHOT_KEY: 1,\n};\n\nexport default class MouseAndKeyboardController implements IController {\n    private pressedButtons: { [ key: number ]: boolean } = {};\n    private pressedMousedButtons: { [ key: number ]: boolean } = {};\n    private gunVector = { x: 0, y: 0 };\n    private cursor = new Cursor();\n\n    constructor() {\n        window.addEventListener( 'keydown', ( e ) => {\n            this.pressedButtons[ e.keyCode ] = true;\n            // if (e.preventDefault) { e.preventDefault(); }\n            // if (e.stopPropagation) { e.stopPropagation(); }\n            // console.log(e.keyCode);\n        } );\n\n        window.addEventListener( 'keyup', ( e ) => {\n            this.pressedButtons[ e.keyCode ] = false;\n            // if (e.preventDefault) { e.preventDefault(); }\n            // if (e.stopPropagation) { e.stopPropagation(); }\n        } );\n\n        this.cursor.positionFromCenterEmitter.subscribe(( cursorPositionVector ) => {\n            this.gunVector = cursorPositionVector;\n        } );\n\n        window.addEventListener( 'mousedown', ( e ) => {\n            this.pressedMousedButtons[ e.which ] = true;\n            if ( e.preventDefault ) { e.preventDefault(); }\n            if ( e.stopPropagation ) { e.stopPropagation(); }\n        } );\n\n        window.addEventListener( 'mouseup', ( e ) => {\n            this.pressedMousedButtons[ e.which ] = false;\n            if ( e.preventDefault ) { e.preventDefault(); }\n            if ( e.stopPropagation ) { e.stopPropagation(); }\n        } );\n\n        window.addEventListener( 'contextmenu', ( e ) => {\n            e.preventDefault();\n            e.stopPropagation();\n        } );\n    };\n\n    public getCursor() {\n        return this.cursor;\n    }\n\n    public get key() {\n        return { ...defaultKeyBinding, ...defaultMouseButtonBinding };\n    }\n\n    public isPressed( button: number ) {\n        return !!this.pressedButtons[ button ] || !!this.pressedMousedButtons[ button ];\n    }\n\n    public getLeftAxis() {\n        const vector = new Vector(\n            +this.isPressed( 68 ) - +this.isPressed( 65 ),\n            +this.isPressed( 83 ) - +this.isPressed( 87 ),\n        );\n\n        return Vector.toSize( vector, 1 );\n    }\n\n    public getRightAxis() {\n        return this.gunVector;\n    }\n}\n","import { Emitter } from '@ma2ciek/events';\nimport { Vector } from '@ma2ciek/math';\nimport { ICameraOptions } from '../engine/ICamera';\n\nexport default class Cursor {\n    public positionFromCenterEmitter = new Emitter<Vector>();\n\n    private lockedElement: HTMLElement;\n    private cursorPosition: Vector;\n\n    public requestPointerLock( element: HTMLElement ) {\n        this.lockedElement = element;\n        this.cursorPosition = { x: 0, y: 0 };\n\n        element.addEventListener( 'click', () => {\n            element.requestPointerLock();\n        } );\n\n        document.addEventListener( 'pointerlockchange', this.lockChangeAlert, false );\n    }\n\n    public exitPointerLock() {\n        document.exitPointerLock();\n        document.removeEventListener( 'pointerlockchange', this.lockChangeAlert );\n        document.removeEventListener( 'mousemove', this.handleMouseMove );\n    }\n\n    public draw( ctx: CanvasRenderingContext2D, options: ICameraOptions ) {\n        if ( !this.cursorPosition ) {\n            return;\n        }\n\n        // const ratio = options.width / ctx.canvas.width;\n\n        // const x = this.cursorPosition.x * ratio - options.center.x;\n        // const y = this.cursorPosition.y * ratio - options.center.y;\n\n        ctx.strokeStyle = 'black';\n        ctx.beginPath();\n        ctx.arc( this.cursorPosition.x, this.cursorPosition.y, 10, 0, 2 * Math.PI, false );\n        ctx.stroke();\n    }\n\n    private lockChangeAlert = () => {\n        if ( this.lockedElement === document.pointerLockElement ) {\n            document.addEventListener( 'mousemove', this.handleMouseMove );\n        } else {\n            document.removeEventListener( 'mousemove', this.handleMouseMove );\n        }\n    }\n\n    private handleMouseMove = ( e: MouseEvent ) => {\n        this.cursorPosition = Vector.add( this.cursorPosition, {\n            x: e.movementX,\n            y: e.movementY,\n        } );\n\n        // if ( this.cursorPosition.x < 0 ) {\n        //     this.cursorPosition.x = 0;\n        // }\n\n        // if ( this.cursorPosition.y < 0 ) {\n        //     this.cursorPosition.y = 0;\n        // }\n\n        // if ( this.cursorPosition.x > this.lockedElement.clientWidth ) {\n        //     this.cursorPosition.x = this.lockedElement.clientWidth;\n        // }\n\n        // if ( this.cursorPosition.y > this.lockedElement.clientHeight ) {\n        //     this.cursorPosition.y = this.lockedElement.clientHeight;\n        // }\n\n        this.positionFromCenterEmitter.emit( Vector.add(\n            this.cursorPosition,\n            { x: -this.lockedElement.clientWidth / 2, y: -this.lockedElement.clientHeight / 2 },\n        ) );\n    }\n}\n","import { Vector } from '@ma2ciek/math';\nimport IController from './IController';\n\nconst defaultKeyBinding = {\n    SHOT_KEY: 5,\n    SPEED_UP: 7,\n};\n\nexport default class PadController implements IController {\n    public get key() {\n        return defaultKeyBinding;\n    }\n\n    private pad: Gamepad;\n\n    public update(pad: Gamepad) {\n        this.pad = pad;\n    }\n\n    public isPressed(button: number) {\n        return this.pad.buttons[button].pressed;\n    }\n\n    public getLeftAxis() {\n        return new Vector(this.pad.axes[0], this.pad.axes[1]);\n    }\n\n    public getRightAxis() {\n        return new Vector(this.pad.axes[2], this.pad.axes[3]);\n    }\n}\n","import BackgroundManager, { IStaticBackgroundOptions } from './collections/BackgroundManager';\nimport BulletManager from './collections/BulletManager';\nimport UnitManager, { IUnitOptions } from './collections/UnitManager';\nimport Cursor from './controllers/Cursor';\nimport Renderer from './engine/Renderer';\nimport Scene from './engine/Scene';\nimport WholeViewCamera from './engine/WholeViewCamera';\n\ninterface IGameOptions {\n    audioTheme: string;\n    units: IUnitOptions[];\n    backgrounds: IStaticBackgroundOptions[];\n    cursor: Cursor;\n}\n\nexport default class Game {\n    private renderer: Renderer;\n    private canvas: HTMLCanvasElement;\n    private cursor: Cursor;\n\n    constructor( map: IGameOptions ) {\n        this.cursor = map.cursor;\n        this.canvas = document.getElementById( 'canvas' ) as HTMLCanvasElement;\n        const ctx = this.canvas.getContext( '2d' ) as CanvasRenderingContext2D;\n\n        const unitManager = new UnitManager();\n        const bulletManager = new BulletManager();\n\n        for ( const object of map.units ) {\n            unitManager.create( object );\n        }\n\n        unitManager.bulletEmitter.subscribe( bullet => bulletManager.add( bullet ) );\n\n        const backgroundManager = BackgroundManager.fromJSON( map.backgrounds );\n\n        const scene = new Scene(\n            backgroundManager,\n            bulletManager,\n            unitManager,\n        );\n\n        scene.addStaticElements( this.cursor );\n\n        const camera = new WholeViewCamera();\n\n        camera.track( unitManager );\n\n        this.renderer = new Renderer( {\n            scene,\n            ctx,\n            camera,\n        } );\n    }\n\n    public play() {\n        this.renderer.render();\n        this.cursor.requestPointerLock( this.canvas );\n    }\n\n    public pause() {\n        this.renderer.stop();\n        this.cursor.exitPointerLock();\n    }\n}\n","import ClassicBackground from '../models/ClassicBackground';\nimport IGameObject from '../models/IGameObject';\nimport IGameObjectCollection from './IGameObjectCollection';\n\nexport interface IStaticBackgroundOptions {\n    colors: string[];\n}\n\nexport default class BackgroundManager implements IGameObjectCollection {\n    public static fromJSON(backgrounds: IStaticBackgroundOptions[]) {\n        const backgroundManager = new BackgroundManager();\n\n        // TODO\n        for (const background of backgrounds) {\n            backgroundManager.add(\n                new ClassicBackground(background.colors),\n            );\n        }\n\n        return backgroundManager;\n    }\n\n    public objectsCollide = false;\n    private backgrounds: IGameObject[] = [];\n\n    public [Symbol.iterator]() {\n        return this.backgrounds[Symbol.iterator]();\n    }\n\n    public add(bg: IGameObject) {\n        this.backgrounds.push(bg);\n    }\n}\n","import { ICameraOptions } from '../engine/ICamera';\nimport { mod } from '../utils/utils';\nimport IGameObject from './IGameObject';\n\nexport default class ClassicBackground implements IGameObject {\n    public position = { x: 0, y: 0 };\n    public type = 'background';\n\n    constructor(private colors: string[]) { }\n\n    public draw(ctx: CanvasRenderingContext2D, { center, width, height }: ICameraOptions) {\n        const tileSize = 100;\n\n        const startX = Math.floor((center.x - width / 2) / tileSize) * tileSize;\n        const startY = Math.floor((center.y - height / 2) / tileSize) * tileSize;\n\n        for (let x = startX; x < center.x + width / 2; x += tileSize) {\n            for (let y = startY; y < center.y + height / 2; y += tileSize) {\n                // TODO: this.colors.length\n                ctx.fillStyle = this.colors[mod(x + y, tileSize * 2) / tileSize];\n                ctx.fillRect(x, y, tileSize + 1, tileSize + 1);\n            }\n        }\n    }\n\n    public move() {\n        // Empty - TODO (?)\n    }\n}\n","export function createArray<T>( size: number, filler: T ) {\n    const arr = new Array<T>( size );\n    for ( let i = 0; i < size; i++ ) {\n        arr[ i ] = filler;\n    }\n    return arr;\n}\n\nexport function mod( x: number, y: number ) {\n    const result = x % y;\n\n    return ( result >= 0 ) ?\n        result :\n        result + y;\n}\n","import Bullet from '../models/Bullet';\nimport IGameObjectCollection from './IGameObjectCollection';\n\nexport default class BulletManager implements IGameObjectCollection {\n    public objectsCollide = true;\n    private bullets: Bullet[] = [];\n\n    public [Symbol.iterator]() {\n        return this.bullets[Symbol.iterator]();\n    }\n\n    public add(bullet: Bullet) {\n        this.bullets.push(bullet);\n\n        bullet.destroyEmitter.subscribe(() => {\n            this.bullets = this.bullets.filter(b => b !== bullet);\n        });\n    }\n}\n","import { Emitter } from '@ma2ciek/events';\nimport Bullet from '../models/Bullet';\nimport IGameObject from '../models/IGameObject';\nimport Soldier, { ISoldierOptions } from '../models/Soldier';\nimport Tank, { ITankOptions } from '../models/Tank';\nimport IGameObjectCollection from './IGameObjectCollection';\n\nexport type IUnitOptions = ISoldierOptions | ITankOptions;\n\nexport default class UnitManager implements IGameObjectCollection {\n    public bulletEmitter = new Emitter<Bullet>();\n    public objectsCollide = true;\n\n    private units: IGameObject[] = [];\n\n    public [Symbol.iterator]() {\n        return this.units[Symbol.iterator]();\n    }\n\n    public create(options: IUnitOptions) {\n        const unit = this.getInstance(options);\n\n        // TODO.\n        if (unit.type === 'soldier') {\n            unit.track(this);\n        }\n\n        unit.bulletEmitter.subscribe(bullet => this.bulletEmitter.emit(bullet));\n        unit.deathEmitter.subscribe(() => {\n            this.units = this.units.filter(u => u !== unit);\n        });\n\n        this.units.push(unit);\n    }\n\n    private getInstance(options: IUnitOptions) {\n        switch (options.type) {\n            case 'soldier':\n                return new Soldier(options);\n            case 'tank':\n                return new Tank(options);\n            default:\n                throw new Error('not implemented for ' + (options as any).type);\n        }\n    }\n}\n","import Sprite from '@ma2ciek/canvas/src/Sprite';\nimport { Emitter } from '@ma2ciek/events';\nimport { Vector } from '@ma2ciek/math';\nimport ISoldierPlayer from '../players/ISoldierPlayer';\nimport TimeController from '../utils/TimeController';\nimport Bullet from './Bullet';\nimport IGameObject, { ICollidingGameObject } from './IGameObject';\n\ninterface ISprites {\n    move: Sprite;\n    idle: Sprite;\n    distanceAttack: Sprite;\n    meleeAttack: Sprite;\n    reload: Sprite;\n}\n\nexport interface ISoldierOptions {\n    position: Vector;\n    type: 'soldier';\n    player: ISoldierPlayer;\n}\n\nconst URL = '../images/soldier/handgun/';\n\nexport default class Soldier implements IGameObject {\n    public bulletEmitter = new Emitter<Bullet>();\n    public deathEmitter = new Emitter();\n\n    public position: Vector;\n    public radius = 30;\n    public type: 'soldier' = 'soldier';\n\n    public handgunSprites: ISprites = {\n        move: new Sprite({\n            url: URL + 'move.png', frameDuration: 50,\n            numberOfFrames: 20, zoom: 0.25,\n        }),\n        idle: new Sprite({\n            url: URL + 'idle.png', frameDuration: 50,\n            numberOfFrames: 20, zoom: 0.25,\n        }),\n        distanceAttack: new Sprite({\n            url: URL + 'distanceAttack.png', frameDuration: 50,\n            numberOfFrames: 3, zoom: 0.25, once: true,\n        }),\n        meleeAttack: new Sprite({\n            url: URL + 'meleeAttack.png', frameDuration: 50,\n            numberOfFrames: 10, zoom: 0.25,\n        }),\n        reload: new Sprite({\n            url: URL + 'reload.png', frameDuration: 50,\n            numberOfFrames: 15, zoom: 0.25, once: true,\n        }),\n    };\n\n    private player: ISoldierPlayer;\n\n    // TODO: Make it configurable\n    private hp = 100;\n    private ammo = 6;\n    private magazineSize = 6;\n    private speed = 2;\n    private bulletSpeed = 10;\n    private angle = 0;\n    private trackedObjects: Iterable<IGameObject>;\n    private shotTimeController = new TimeController(1000);\n    private bulletDamage = 10;\n    private bulletRadius = 3;\n\n    private currentSprite = this.handgunSprites.idle;\n\n    constructor({ position, player }: ISoldierOptions) {\n        this.position = position;\n        this.player = player;\n    }\n\n    public draw(ctx: CanvasRenderingContext2D) {\n        this.currentSprite.draw(ctx, this.position, this.angle);\n    }\n\n    public track(iterable: Iterable<IGameObject>) {\n        this.trackedObjects = iterable;\n    }\n\n    public handleHit(object: ICollidingGameObject) {\n        if (object.type !== 'bullet' || object.owner === this) {\n            return;\n        }\n\n        this.hp -= (object as any).damage;\n\n        if (this.hp <= 0) {\n            this.deathEmitter.emit({});\n        }\n    }\n\n    public getShotTimeController() {\n        return this.shotTimeController;\n    }\n\n    public move() {\n        this.player.move(this);\n    }\n\n    // TODO: move to AI.\n    public findBestOpponent() {\n        const opponents = Array.from(this.trackedObjects).filter(obj => obj !== this);\n\n        let bestOpponent = opponents[0];\n\n        if (!bestOpponent) {\n            return;\n        }\n\n        let bestDistance = Vector.squaredDistance(opponents[0].position, this.position);\n\n        for (const opponent of opponents.slice(1)) {\n            const distance = Vector.squaredDistance(opponent.position, this.position);\n            if (distance < bestDistance) {\n                bestOpponent = opponent;\n                bestDistance = distance;\n            }\n        }\n\n        return bestOpponent;\n    }\n\n    public hasToReload() {\n        return this.ammo === 0;\n    }\n\n    public reload() {\n        this.ammo = this.magazineSize;\n        this.setSprite(this.handgunSprites.reload);\n    }\n\n    public shot(object: IGameObject) {\n        this.setSprite(this.handgunSprites.distanceAttack);\n        this.ammo--;\n\n        const velocity = Vector.toSize(Vector.fromDiff(this.position, object.position), this.bulletSpeed);\n\n        const translation = Vector.toSize(velocity, 40);\n        const spriteShotModifier = Vector.add(translation, { x: -translation.y * 0.4, y: translation.x * 0.4 });\n        const startPosition = Vector.add(this.position, spriteShotModifier);\n\n        const bullet = new Bullet({\n            position: startPosition,\n            velocity,\n            owner: this,\n            damage: this.bulletDamage,\n            radius: this.bulletRadius,\n        });\n\n        this.bulletEmitter.emit(bullet);\n    }\n\n    public setSprite(sprite: Sprite) {\n        if (this.currentSprite === sprite) {\n            return;\n        }\n\n        this.currentSprite = sprite;\n        this.currentSprite.reset();\n    }\n\n    public getSpeed() {\n        return this.speed;\n    }\n\n    public getCurrentSprite() {\n        return this.currentSprite;\n    }\n\n    public setAngle(angle: number) {\n        this.angle = angle;\n    }\n}\n","export default class TimeController {\n    private lastTimestamp = 0;\n    private debounceTime = 0;\n\n    constructor( debounceTime: number ) {\n        this.debounceTime = debounceTime;\n    }\n\n    public can() {\n        const available = Date.now() > this.debounceTime + this.lastTimestamp;\n        if ( available ) {\n            this.lastTimestamp = Date.now();\n        }\n\n        return available;\n    }\n}\n","import { drawArc } from '@ma2ciek/canvas';\nimport { Emitter } from '@ma2ciek/events';\nimport { Vector } from '@ma2ciek/math';\nimport { ICameraOptions } from '../engine/ICamera';\nimport IGameObject from '../models/IGameObject';\n\ninterface IBulletOptions {\n    position: Vector;\n    velocity: Vector;\n    owner: IGameObject;\n    damage: number;\n    radius: number;\n}\n\nexport default class Bullet implements IGameObject {\n    public destroyEmitter = new Emitter();\n    public type: 'bullet' = 'bullet';\n\n    public get position() {\n        return this.options.position;\n    }\n\n    public get radius() {\n        return this.options.radius;\n    }\n\n    public get damage() {\n        return this.options.damage;\n    }\n\n    public constructor( private options: IBulletOptions ) { }\n\n    public draw( ctx: CanvasRenderingContext2D, options: ICameraOptions ) {\n        if (\n            this.position.x < options.center.x - options.width / 2 ||\n            this.position.x > options.center.x + options.width / 2 ||\n\n            this.position.y < options.center.y - options.height / 2 ||\n            this.position.y > options.center.y + options.height / 2\n        ) {\n            this.handleHit();\n            return;\n        }\n\n        drawArc( ctx, this.position.x, this.position.y, this.radius, 'black' );\n    }\n\n    public move() {\n        this.position.x += this.options.velocity.x;\n        this.position.y += this.options.velocity.y;\n    }\n\n    public handleHit() {\n        this.destroyEmitter.emit( this );\n    }\n}\n","import { drawImage, drawRect, Layer } from '@ma2ciek/canvas';\nimport Emitter from '@ma2ciek/events/src/Emitter';\nimport loadImage from '@ma2ciek/loaders/src/loadImage';\nimport normalizeAngle from '@ma2ciek/math/src/normalizeAngle';\nimport Vector from '@ma2ciek/math/src/Vector';\nimport ITankPlayer from '../players/ITankPlayer';\nimport ITankModel from '../tank-models/ITankModel';\nimport TimeController from '../utils/TimeController';\nimport Bullet from './Bullet';\nimport IGameObject, { ICollidingGameObject } from './IGameObject';\n\nexport interface ITankOptions {\n    player: ITankPlayer;\n    position: Vector;\n    model: ITankModel;\n    type: 'tank';\n}\n\nexport default class Tank implements IGameObject, ICollidingGameObject {\n    public bulletEmitter = new Emitter<Bullet>();\n    public deathEmitter = new Emitter();\n\n    public model: ITankModel;\n    public position: Vector;\n    public type: 'tank' = 'tank';\n    public radius = 40;\n\n    private hp: number;\n    private gunAngle = Math.atan2( 0, 0 );\n    private tankAngle = Math.atan2( 0, 0 );\n    private originalTankImage: HTMLImageElement;\n    private image: Layer;\n    private player: ITankPlayer;\n    private shotTimeController: TimeController;\n\n    constructor( options: ITankOptions ) {\n        this.model = options.model;\n        this.hp = options.model.hp;\n\n        this.shotTimeController = new TimeController( 1000 );\n\n        this.player = options.player;\n\n        this.position = options.position;\n\n        loadImage( this.model.url )\n            .then( image => {\n                this.originalTankImage = image;\n                this.image = Layer.fromImage( image ).colorize( options.player.getColor(), 0.1 );\n            } );\n    }\n\n    public draw( ctx: CanvasRenderingContext2D ) {\n        if ( !this.originalTankImage ) {\n            return;\n        }\n\n        this.drawTank( ctx );\n        this.drawGun( ctx );\n    }\n\n    public handleHit( object: ICollidingGameObject ) {\n        if ( object.type !== 'bullet' || object.owner === this ) {\n            return;\n        }\n\n        this.hp -= ( object as any ).damage;\n\n        if ( this.hp <= 0 ) {\n            this.deathEmitter.emit( {} );\n        }\n    }\n\n    public move() {\n        let moveVector = this.player.getMoveVector();\n        let gunVector = this.player.getGunVector();\n\n        if ( this.player.isSpeedButtonPressed() ) {\n            moveVector = Vector.times( moveVector, 2 );\n            gunVector = Vector.times( gunVector, 2 );\n        }\n\n        const gunAngle = Vector.toAngle( gunVector );\n        const multiplier = Vector.getSize( gunVector );\n\n        this.moveTank( moveVector );\n        this.rotateGun( gunAngle, multiplier );\n\n        this.maybeShot();\n    }\n\n    private moveTank( moveVector: Vector ) {\n        const moveAngle = Vector.toAngle( moveVector );\n        const absMoveForce = Math.abs( Math.cos( moveAngle - this.tankAngle ) * this.model.tankSpeed );\n\n        const newMoveVector = Vector.times( moveVector, absMoveForce );\n\n        if ( moveVector.x !== 0 || moveVector.y !== 0 ) {\n            this.rotateTank( moveAngle, Vector.getSize( moveVector ) );\n        }\n\n        this.position = Vector.add( this.position, newMoveVector );\n\n        if ( this.position.x > 3000 ) {\n            this.position.x = 3000;\n        }\n\n        if ( this.position.x < -3000 ) {\n            this.position.x = -3000;\n        }\n\n        if ( this.position.y > 3000 ) {\n            this.position.y = 3000;\n        }\n\n        if ( this.position.y < -3000 ) {\n            this.position.y = -3000;\n        }\n    }\n\n    private rotateTank( angle: number, multiplier: number ) {\n        const angleDiff = Math.abs( this.tankAngle - angle );\n        const movement = Math.min( this.model.tankRotationSpeed * multiplier, angleDiff );\n\n        if ( ( this.tankAngle - angle > 0 && this.tankAngle - angle < Math.PI ) ||\n            this.tankAngle - angle < -Math.PI ) {\n            this.tankAngle -= movement;\n        } else {\n            this.tankAngle += movement;\n        }\n\n        this.tankAngle = normalizeAngle( this.tankAngle );\n    }\n\n    private rotateGun( gunAngle: number, multiplier: number ) {\n        const movement = Math.min( this.model.gunRotationSpeed * multiplier, Math.abs( this.gunAngle - gunAngle ) );\n\n        if ( ( this.gunAngle - gunAngle > 0 && this.gunAngle - gunAngle < Math.PI ) ||\n            this.gunAngle - gunAngle < -Math.PI ) {\n            this.gunAngle -= movement;\n        } else {\n            this.gunAngle += movement;\n        }\n\n        this.gunAngle = normalizeAngle( this.gunAngle );\n    }\n\n    private getBulletSpeed() {\n        return this.model.bulletSpeed;\n    }\n\n    private getPosition() {\n        return this.position;\n    }\n\n    private getGunSize() {\n        return this.model.gunSize;\n    }\n\n    private getBulletDamage() {\n        return this.model.bulletDamage;\n    }\n\n    private getBulletRadius() {\n        return this.model.bulletRadius;\n    }\n\n    private maybeShot() {\n        if ( !this.player.isShooting() || !this.shotTimeController.can() ) {\n            return;\n        }\n\n        const gunVector = Vector.fromAngle( this.gunAngle, this.getBulletSpeed() );\n        const startPosition = Vector.add( this.getPosition(), Vector.toSize( gunVector, this.getGunSize() ) );\n\n        const bullet = new Bullet( {\n            position: startPosition,\n            velocity: gunVector,\n            owner: this,\n            damage: this.getBulletDamage(),\n            radius: this.getBulletRadius(),\n        } );\n\n        this.bulletEmitter.emit( bullet );\n        // this.shotSound.play();\n    }\n\n    private drawTank( ctx: CanvasRenderingContext2D ) {\n        drawImage( {\n            ctx,\n            image: this.image.getCanvas(),\n            x: this.model.tank.x,\n            y: this.model.tank.y,\n            width: this.model.tank.width,\n            height: this.model.tank.height,\n            canvasOffsetX: this.position.x,\n            canvasOffsetY: this.position.y,\n            angle: this.tankAngle,\n            center: this.model.tankCenter,\n        } );\n\n        if ( ( window as any ).debugMode ) {\n            drawRect( {\n                ctx,\n                x: this.position.x,\n                y: this.position.y,\n                width: this.model.tank.width,\n                height: this.model.tank.height,\n                strokeStyle: 'red',\n                strokeWidth: 1,\n            } );\n        }\n    }\n\n    private drawGun( ctx: CanvasRenderingContext2D ) {\n        drawImage( {\n            ctx,\n            image: this.originalTankImage,\n            x: this.model.gun.x,\n            y: this.model.gun.y,\n            width: this.model.gun.width,\n            height: this.model.gun.height,\n            canvasOffsetX: this.position.x,\n            canvasOffsetY: this.position.y,\n            angle: this.gunAngle,\n            center: this.model.gunCenter,\n        } );\n\n        if ( ( window as any ).debugMode ) {\n            drawRect( {\n                ctx,\n                x: this.position.x,\n                y: this.position.y,\n                width: this.model.gun.width,\n                height: this.model.gun.height,\n                strokeStyle: 'blue',\n                strokeWidth: 1,\n            } );\n        }\n    }\n}\n","import ICamera from './ICamera';\nimport Scene from './Scene';\n\ninterface IRendererOptions {\n    scene: Scene;\n    ctx: CanvasRenderingContext2D;\n    camera: ICamera;\n}\n\nexport default class Renderer {\n    private scene: Scene;\n    private ctx: CanvasRenderingContext2D;\n    private camera: ICamera;\n    private animationId: number;\n\n    constructor( { scene, ctx, camera }: IRendererOptions ) {\n        this.scene = scene;\n        this.ctx = ctx;\n        this.camera = camera;\n\n        this.updateScreen();\n        window.onresize = () => this.updateScreen();\n    }\n\n    public stop() {\n        window.cancelAnimationFrame( this.animationId );\n    }\n\n    public render = () => {\n        this.ctx.clearRect( 0, 0, this.ctx.canvas.width, this.ctx.canvas.height );\n\n        this.camera.updateBefore( this.ctx );\n\n        this.scene.update();\n        this.scene.render( this.ctx, this.camera.getOptions() );\n\n        this.camera.updateAfter( this.ctx );\n\n        this.scene.renderStaticElements( this.ctx, this.camera.getOptions() );\n        this.animationId = window.requestAnimationFrame( this.render );\n    }\n\n    private updateScreen() {\n        this.ctx.canvas.width = window.innerWidth;\n        this.ctx.canvas.height = window.innerHeight;\n    }\n}\n","import IGameObjectIterable, { ICollidingGameObjectCollection } from '../collections/IGameObjectCollection';\nimport CollisionManager from './CollisionManager';\nimport { ICameraOptions } from './ICamera';\nimport IDrawable from './IDrawable';\n\nexport default class Scene {\n    private collisionManager = new CollisionManager();\n    private iterables: IGameObjectIterable[] = [];\n    private staticElements: IDrawable[] = [];\n\n    constructor( ...iterables: IGameObjectIterable[] ) {\n        this.add( ...iterables );\n    }\n\n    public add( ...iterables: IGameObjectIterable[] ) {\n        for ( const iterable of iterables ) {\n            this.iterables.push( iterable );\n\n            if ( iterable.objectsCollide ) {\n                this.collisionManager.add( iterable as ICollidingGameObjectCollection );\n            }\n        }\n    }\n\n    public render( ctx: CanvasRenderingContext2D, cameraOptions: ICameraOptions ) {\n        for ( const iterable of this.iterables ) {\n            for ( const element of iterable ) {\n                element.move();\n                element.draw( ctx, cameraOptions );\n            }\n        }\n\n        ctx.restore();\n    }\n\n    public update() {\n        for ( const iterable of this.iterables ) {\n            for ( const element of iterable ) {\n                element.move();\n            }\n        }\n\n        this.collisionManager.checkCollisions();\n    }\n\n    public addStaticElements( ...staticElements: IDrawable[] ) {\n        this.staticElements.push( ...staticElements );\n    }\n\n    public renderStaticElements( ctx: CanvasRenderingContext2D, options: ICameraOptions ) {\n        for ( const el of this.staticElements ) {\n            el.draw( ctx, options );\n        }\n    }\n}\n","import { Vector } from '@ma2ciek/math';\nimport { ICollidingGameObjectCollection } from '../collections/IGameObjectCollection';\nimport { ICollidingGameObject } from '../models/IGameObject';\n\nexport default class CollisionManager {\n    private objectIterators: ICollidingGameObjectCollection[] = [];\n\n    public add(...objects: ICollidingGameObjectCollection[]) {\n        this.objectIterators.push(...objects);\n    }\n\n    public checkCollisions() {\n        for (let i = 0; i < this.objectIterators.length; i++) {\n            for (let j = 0; j < i; j++) {\n                for (const o1 of this.objectIterators[i]) {\n                    for (const o2 of this.objectIterators[j]) {\n                        const collision = this.checkCollision(o1, o2);\n\n                        if (collision) {\n                            o1.handleHit(o2);\n                            o2.handleHit(o1);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    private checkCollision(o1: ICollidingGameObject, o2: ICollidingGameObject) {\n        return (o1.radius + o2.radius) ** 2 > Vector.squaredDistance(o1.position, o2.position);\n    }\n}\n","import IGameObjectCollection from '../collections/IGameObjectCollection';\nimport ICamera from './ICamera';\n\nexport default class WholeViewCamera implements ICamera {\n    private collection: IGameObjectCollection;\n\n    public updateBefore(ctx: CanvasRenderingContext2D) {\n        const options = this.getOptions();\n\n        const ratio = options.ratio;\n\n        ctx.save();\n\n        ctx.scale(ratio, ratio);\n\n        ctx.translate(\n            ctx.canvas.width / 2 / ratio - options.center.x,\n            ctx.canvas.height / 2 / ratio - options.center.y,\n        );\n    }\n\n    public updateAfter(ctx: CanvasRenderingContext2D) {\n        ctx.restore();\n    }\n\n    public track(collection: IGameObjectCollection) {\n        this.collection = collection;\n    }\n\n    public getOptions() {\n        let maxLeft = Infinity;\n        let maxRight = -Infinity;\n        let maxTop = Infinity;\n        let maxBottom = -Infinity;\n\n        for (const { position } of this.collection) {\n            maxLeft = Math.min(position.x, maxLeft);\n            maxRight = Math.max(position.x, maxRight);\n            maxTop = Math.min(position.y, maxTop);\n            maxBottom = Math.max(position.y, maxBottom);\n        }\n\n        const ratio = Math.min(\n            window.innerWidth / (maxRight - maxLeft + window.innerWidth),\n            window.innerHeight / (maxBottom - maxTop + window.innerHeight),\n        );\n\n        return {\n            center: {\n                x: (maxLeft + maxRight) / 2,\n                y: (maxTop + maxBottom) / 2,\n            },\n            width: window.innerWidth / ratio,\n            height: window.innerHeight / ratio,\n            ratio,\n        };\n    }\n}\n","import IController from '../controllers/IController';\nimport ITankPlayer from './ITankPlayer';\n\nexport default class HumanTankPlayer implements ITankPlayer {\n    private controller: IController;\n\n    constructor( controller: IController ) {\n        this.controller = controller;\n    }\n\n    public isShooting() {\n        return this.controller.isPressed( this.controller.key.SHOT_KEY );\n    }\n\n    public isSpeedButtonPressed() {\n        return this.controller.isPressed( this.controller.key.SPEED_UP );\n    }\n\n    public getMoveVector() {\n        return this.controller.getLeftAxis();\n    }\n\n    public getGunVector() {\n        return this.controller.getRightAxis();\n    }\n\n    public getColor() {\n        return {\n            red: 1,\n            green: 1,\n            blue: 1,\n        };\n    }\n}\n","import ITankModel from './ITankModel';\n\nconst E100: ITankModel = {\n    url: '../images/tanks/E-100_strip2.png',\n    tank: { x: 0, y: 0, width: 100, height: 170 },\n    gun: { x: 95, y: 10, width: 100, height: 200 },\n    tankCenter: { x: 50, y: 85 },\n    gunCenter: { x: 145, y: 115 },\n    gunSize: 70,\n    tankSpeed: 3,\n    tankRotationSpeed: Math.PI / 25,\n    gunRotationSpeed: Math.PI / 30,\n    bulletSpeed: 20,\n    shotDuration: 500,\n    bulletDamage: 40,\n    bulletRadius: 5,\n    hp: 100,\n};\n\nexport default E100;\n"]}